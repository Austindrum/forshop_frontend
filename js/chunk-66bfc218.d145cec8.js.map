{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./src/views/backend/Orders.vue?e914","webpack:///./src/views/backend/Orders.vue?1468","webpack:///src/views/backend/Orders.vue","webpack:///./src/views/backend/Orders.vue?cffd","webpack:///./src/views/backend/Orders.vue"],"names":["$","$filter","filter","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","isLoading","on","$event","_m","orders","_l","item","index","key","_v","_s","createdAt","split","name","email","tel","address","product","i","staticStyle","title","substring","OrderItem","num","unit","payment","Products","amount","id","domProps","status","setOrderPaid","_e","pageNum","pageCallBack","staticRenderFns","data","currentPage","pageSize","isNew","pagination","methods","setPageNum","vm","Math","ceil","forEach","$set","order","parseInt","created","getOrders","watch","computed","pageOrders","component"],"mappings":"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","file":"js/chunk-66bfc218.d145cec8.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n// Edge 14- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Orders.vue?vue&type=style&index=0&id=0f83ac9a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Orders.vue?vue&type=style&index=0&id=0f83ac9a&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fluid\"},[_c('Loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('table',{staticClass:\"table\"},[_vm._m(0),(_vm.orders.length)?_c('tbody',_vm._l((_vm.pageOrders),function(item,index){return _c('tr',{key:index},[_c('td',[_vm._v(_vm._s(item.createdAt.split('T')[0]))]),_c('td',[_c('ul',{staticClass:\"list-unstyled text-left\"},[_c('li',[_c('strong',[_vm._v(\"客戶名稱\")]),_vm._v(\": \"+_vm._s(item.name))]),_c('li',[_c('strong',[_vm._v(\"電子信箱\")]),_vm._v(\": \"+_vm._s(item.email))]),_c('li',[_c('strong',[_vm._v(\"手機\")]),_vm._v(\": \"+_vm._s(item.tel))]),_c('li',[_c('strong',[_vm._v(\"地址\")]),_vm._v(\": \"+_vm._s(item.address))])])]),_c('td',[_c('ul',{staticClass:\"list-unstyled text-left\"},_vm._l((item.Products),function(product,i){return _c('li',{key:i,staticClass:\"pb-2 pt-2\",staticStyle:{\"border-bottom\":\"1px solid #DCDCDC\"}},[_vm._v(\" \"+_vm._s(product.title.substring(0, 20))),_c('br'),_vm._v(\" 數量：\"+_vm._s(product.OrderItem.num)+\" \"+_vm._s(product.unit)+\" \")])}),0)]),_c('td',[_vm._v(_vm._s(item.payment))]),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(item.Products[0].OrderItem.amount))]),_c('td',[_c('div',{staticClass:\"custom-control custom-switch\"},[_c('input',{staticClass:\"custom-control-input\",attrs:{\"id\":item.id,\"type\":\"checkbox\"},domProps:{\"checked\":item.status},on:{\"change\":function($event){return _vm.setOrderPaid(item.id, item.status)}}}),_c('label',{staticClass:\"custom-control-label\",attrs:{\"for\":item.id}},[(item.status)?_c('strong',{staticClass:\"text-paid\"},[_vm._v(\"已付款\")]):_c('span',{staticClass:\"text-muted\"},[_vm._v(\"尚未付款\")])])])])])}),0):_vm._e()]),_c('Paginate',{attrs:{\"page-count\":_vm.pageNum,\"prev-text\":'<<',\"prev-class\":'page-item',\"prev-link-class\":'page-link',\"next-text\":'>>',\"next-class\":'page-item',\"next-link-class\":'page-link',\"click-handler\":_vm.pageCallBack,\"page-class\":'page-item',\"page-link-class\":'page-link',\"container-class\":'pagination'}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"下單時間\")]),_c('th',[_vm._v(\"客戶資訊\")]),_c('th',[_vm._v(\"購買商品\")]),_c('th',[_vm._v(\"付款方式\")]),_c('th',[_vm._v(\"應付金額\")]),_c('th',[_vm._v(\"是否付款\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container-fluid\">\n    <Loading :active.sync=\"isLoading\" />\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th>下單時間</th>\n          <th>客戶資訊</th>\n          <th>購買商品</th>\n          <th>付款方式</th>\n          <th>應付金額</th>\n          <th>是否付款</th>\n        </tr>\n      </thead>\n      <tbody v-if=\"orders.length\">\n        <tr v-for=\"(item, index) in pageOrders\" :key=\"index\">\n          <td>{{ item.createdAt.split('T')[0] }}</td>\n          <td>\n            <ul class=\"list-unstyled text-left\">\n              <li><strong>客戶名稱</strong>: {{ item.name }}</li>\n              <li><strong>電子信箱</strong>: {{ item.email }}</li>\n              <li><strong>手機</strong>: {{ item.tel }}</li>\n              <li><strong>地址</strong>: {{ item.address }}</li>\n            </ul>\n          </td>\n          <td>\n            <ul class=\"list-unstyled text-left\">\n              <li class=\"pb-2 pt-2\" style=\"border-bottom: 1px solid #DCDCDC\"\n              v-for=\"(product, i) in item.Products\" :key=\"i\">\n                {{ product.title.substring(0, 20) }}<br/> 數量：{{ product.OrderItem.num }}\n                {{ product.unit }}\n              </li>\n            </ul>\n          </td>\n          <td>{{ item.payment }}</td>\n          <td class=\"text-right\">{{ item.Products[0].OrderItem.amount }}</td>\n          <td>\n            <div class=\"custom-control custom-switch\">\n              <input\n                :id=\"item.id\"\n                type=\"checkbox\"\n                class=\"custom-control-input\"\n                @change=\"setOrderPaid(item.id, item.status)\"\n                :checked=\"item.status\"\n              />\n              <label class=\"custom-control-label\" :for=\"item.id\">\n                <strong v-if=\"item.status\" class=\"text-paid\">已付款</strong>\n                <span v-else class=\"text-muted\">尚未付款</span>\n              </label>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <Paginate\n      :page-count=\"pageNum\"\n      :prev-text=\"'<<'\"\n      :prev-class=\"'page-item'\"\n      :prev-link-class=\"'page-link'\"\n      :next-text=\"'>>'\"\n      :next-class=\"'page-item'\"\n      :next-link-class=\"'page-link'\"\n      :click-handler=\"pageCallBack\"\n      :page-class=\"'page-item'\"\n      :page-link-class=\"'page-link'\"\n      :container-class=\"'pagination'\"\n    />\n  </div>\n</template>\n\n<script>\nimport adminAuthAPI from '../../apis/admin/auth';\n\nexport default {\n  data() {\n    return {\n      pageNum: 1,\n      currentPage: 1,\n      pageSize: 10,\n      orders: [],\n      isNew: false,\n      pagination: {},\n      isLoading: false,\n    };\n  },\n  methods: {\n    async getOrders() {\n      const vm = this;\n      vm.isLoading = true;\n      const { data, statusText } = await adminAuthAPI.getOrders();\n      if (data.status === 'success' && statusText === 'OK') {\n        vm.orders = data.orders;\n      }\n      vm.isLoading = false;\n    },\n    async setOrderPaid(productId, status) {\n      const vm = this;\n      const payment = {\n        productId,\n        status,\n      };\n      vm.isLoading = true;\n      const { data, statusText } = await adminAuthAPI.putOrder(payment);\n      if (data.status === 'success' && statusText === 'OK') {\n        vm.$swal({\n          icon: 'success',\n          title: '客戶付款資訊編輯成功',\n        });\n      }\n      vm.getOrders();\n      vm.isLoading = false;\n    },\n    pageCallBack(num) {\n      this.currentPage = num;\n    },\n    setPageNum() {\n      const vm = this;\n      const data = vm.orders;\n      vm.pageNum = Math.ceil(data.length / vm.pageSize);\n      data.forEach((order, index) => {\n        vm.$set(order, 'page', parseInt(index / vm.pageSize, 10) + 1);\n        vm.$set(order, 'num', index + 1);\n      });\n      return data;\n    },\n  },\n  created() {\n    this.getOrders();\n  },\n  watch: {\n    orders() {\n      this.setPageNum();\n    },\n  },\n  computed: {\n    pageOrders() {\n      const vm = this;\n      let data = vm.setPageNum();\n      if (data && data.length > 0) {\n        data = data.filter((product) => product.page === vm.currentPage);\n        return data;\n      }\n      return [];\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n  .text-paid {\n    color: #219ebc;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Orders.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Orders.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Orders.vue?vue&type=template&id=0f83ac9a&scoped=true&\"\nimport script from \"./Orders.vue?vue&type=script&lang=js&\"\nexport * from \"./Orders.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Orders.vue?vue&type=style&index=0&id=0f83ac9a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f83ac9a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}